
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ozontech.github.io/pg_doorman/2.2.2/tutorials/basic-usage/">
      
      
        <link rel="prev" href="../installation/">
      
      
        <link rel="next" href="../binary-upgrade/">
      
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Basic Usage - PgDoorman Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pgdoorman-basic-usage-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PgDoorman Documentation" class="md-header__button md-logo" aria-label="PgDoorman Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PgDoorman Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Usage
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ozontech/pg_doorman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  
    
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/general/" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../benchmarks/" class="md-tabs__link">
        
  
  
    
  
  Benchmarks

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PgDoorman Documentation" class="md-nav__button md-logo" aria-label="PgDoorman Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96m0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32m32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16m16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16"/></svg>

    </a>
    PgDoorman Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ozontech/pg_doorman" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Basic Usage
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Basic Usage
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#command-line-options" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-options" class="md-nav__link">
    <span class="md-ellipsis">
      Available Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-and-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup and Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration File Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimal-configuration-example" class="md-nav__link">
    <span class="md-ellipsis">
      Minimal Configuration Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-configuration-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic Configuration Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-pgdoorman" class="md-nav__link">
    <span class="md-ellipsis">
      Running PgDoorman
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-to-postgresql-via-pgdoorman" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to PostgreSQL via PgDoorman
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    <span class="md-ellipsis">
      Administration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Administration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#admin-console" class="md-nav__link">
    <span class="md-ellipsis">
      Admin Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-pgdoorman" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring PgDoorman
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reloading-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Reloading Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#admin-console-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Admin Console Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Admin Console Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#show-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Show Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Show Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#show-stats" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW STATS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-servers" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW SERVERS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-clients" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW CLIENTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-pools" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW POOLS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-users" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW USERS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-databases" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW DATABASES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-sockets" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW SOCKETS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-version" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW VERSION
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Control Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      SHUTDOWN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reload" class="md-nav__link">
    <span class="md-ellipsis">
      RELOAD
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Signal Handling
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../binary-upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Binary Upgrade Process
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to PgDoorman
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/general/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pool Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/prometheus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus Settings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmarks
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#command-line-options" class="md-nav__link">
    <span class="md-ellipsis">
      Command Line Options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Command Line Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-options" class="md-nav__link">
    <span class="md-ellipsis">
      Available Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup-and-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup and Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-file-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration File Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimal-configuration-example" class="md-nav__link">
    <span class="md-ellipsis">
      Minimal Configuration Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-configuration-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic Configuration Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-pgdoorman" class="md-nav__link">
    <span class="md-ellipsis">
      Running PgDoorman
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting-to-postgresql-via-pgdoorman" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to PostgreSQL via PgDoorman
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#administration" class="md-nav__link">
    <span class="md-ellipsis">
      Administration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Administration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#admin-console" class="md-nav__link">
    <span class="md-ellipsis">
      Admin Console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-pgdoorman" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring PgDoorman
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reloading-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Reloading Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#admin-console-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Admin Console Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Admin Console Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#show-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Show Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Show Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#show-stats" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW STATS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-servers" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW SERVERS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-clients" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW CLIENTS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-pools" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW POOLS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-users" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW USERS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-databases" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW DATABASES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-sockets" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW SOCKETS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-version" class="md-nav__link">
    <span class="md-ellipsis">
      SHOW VERSION
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-commands" class="md-nav__link">
    <span class="md-ellipsis">
      Control Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Control Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      SHUTDOWN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reload" class="md-nav__link">
    <span class="md-ellipsis">
      RELOAD
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Signal Handling
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="pgdoorman-basic-usage-guide">PgDoorman Basic Usage Guide</h1>
<p>PgDoorman is a high-performance PostgreSQL connection pooler based on PgCat. This comprehensive guide will help you get started with configuring, running, and managing PgDoorman for your PostgreSQL environment.</p>
<h2 id="command-line-options">Command Line Options</h2>
<p>PgDoorman offers several command-line options to customize its behavior when starting the service:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>pg_doorman<span class="w"> </span>--help
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>PgDoorman:<span class="w"> </span>Nextgen<span class="w"> </span>PostgreSQL<span class="w"> </span>Pooler<span class="w"> </span><span class="o">(</span>based<span class="w"> </span>on<span class="w"> </span>PgCat<span class="o">)</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>Usage:<span class="w"> </span>pg_doorman<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w"> </span><span class="o">[</span>CONFIG_FILE<span class="o">]</span><span class="w"> </span><span class="o">[</span>COMMAND<span class="o">]</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>Commands:
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">  </span>generate<span class="w">  </span>Generate<span class="w"> </span>configuration<span class="w"> </span><span class="k">for</span><span class="w"> </span>pg_doorman<span class="w"> </span>by<span class="w"> </span>connecting<span class="w"> </span>to<span class="w"> </span>PostgreSQL<span class="w"> </span>and<span class="w"> </span>auto-detecting<span class="w"> </span>databases<span class="w"> </span>and<span class="w"> </span>users
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">  </span><span class="nb">help</span><span class="w">      </span>Print<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>or<span class="w"> </span>the<span class="w"> </span><span class="nb">help</span><span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>given<span class="w"> </span>subcommand<span class="o">(</span>s<span class="o">)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>Arguments:
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">  </span><span class="o">[</span>CONFIG_FILE<span class="o">]</span><span class="w">  </span><span class="o">[</span>env:<span class="w"> </span><span class="nv">CONFIG_FILE</span><span class="o">=]</span><span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>pg_doorman.toml<span class="o">]</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>Options:
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">  </span>-l,<span class="w"> </span>--log-level<span class="w"> </span>&lt;LOG_LEVEL&gt;<span class="w">    </span><span class="o">[</span>env:<span class="w"> </span><span class="nv">LOG_LEVEL</span><span class="o">=]</span><span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>INFO<span class="o">]</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">  </span>-F,<span class="w"> </span>--log-format<span class="w"> </span>&lt;LOG_FORMAT&gt;<span class="w">  </span><span class="o">[</span>env:<span class="w"> </span><span class="nv">LOG_FORMAT</span><span class="o">=]</span><span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>text<span class="o">]</span><span class="w"> </span><span class="o">[</span>possible<span class="w"> </span>values:<span class="w"> </span>text,<span class="w"> </span>structured,<span class="w"> </span>debug<span class="o">]</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">  </span>-n,<span class="w"> </span>--no-color<span class="w">                 </span>disable<span class="w"> </span>colors<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>log<span class="w"> </span>output<span class="w"> </span><span class="o">[</span>env:<span class="w"> </span><span class="nv">NO_COLOR</span><span class="o">=]</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">  </span>-d,<span class="w"> </span>--daemon<span class="w">                   </span>run<span class="w"> </span>as<span class="w"> </span>daemon<span class="w"> </span><span class="o">[</span>env:<span class="w"> </span><span class="nv">DAEMON</span><span class="o">=]</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">                     </span>Print<span class="w"> </span><span class="nb">help</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">  </span>-V,<span class="w"> </span>--version<span class="w">                  </span>Print<span class="w"> </span>version
</span></code></pre></div>
<h3 id="available-options">Available Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d</code>, <code>--daemon</code></td>
<td>Run in the background. Without this option, the process will run in the foreground.<br><br>In daemon mode, setting <code>daemon_pid_file</code> and <code>syslog_prog_name</code> is required. No log messages will be written to stderr after going into the background.</td>
</tr>
<tr>
<td><code>-l</code>, <code>--log-level</code></td>
<td>Set log level: <code>INFO</code>, <code>DEBUG</code>, or <code>WARN</code>.</td>
</tr>
<tr>
<td><code>-F</code>, <code>--log-format</code></td>
<td>Set log format. Possible values: <code>text</code>, <code>structured</code>, <code>debug</code>.</td>
</tr>
<tr>
<td><code>-n</code>, <code>--no-color</code></td>
<td>Disable colors in the log output.</td>
</tr>
<tr>
<td><code>-V</code>, <code>--version</code></td>
<td>Show version information.</td>
</tr>
<tr>
<td><code>-h</code>, <code>--help</code></td>
<td>Show help information.</td>
</tr>
</tbody>
</table>
<h2 id="setup-and-configuration">Setup and Configuration</h2>
<h3 id="configuration-file-structure">Configuration File Structure</h3>
<p>PgDoorman uses a <a href="https://toml.io/">TOML format</a> configuration file to define its behavior. The configuration file is organized into several sections:</p>
<ul>
<li><code>[general]</code> - Global settings for the PgDoorman service</li>
<li><code>[pools]</code> - Database pool definitions</li>
<li><code>[pools.&lt;name&gt;]</code> - Settings for a specific database pool</li>
<li><code>[pools.&lt;name&gt;.users.&lt;n&gt;]</code> - User settings for a specific database pool</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Some parameters <strong>must</strong> be specified in the configuration file for PgDoorman to start, even if they have default values. For example, you must specify an admin username and password to access the administrative console.</p>
</div>
<h3 id="minimal-configuration-example">Minimal Configuration Example</h3>
<p>Here's a minimal configuration example to get you started:</p>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Global settings</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">[general]</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span><span class="w">    </span><span class="c1"># Listen on all interfaces</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6432</span><span class="w">         </span><span class="c1"># Port for client connections</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># Admin credentials for the management console</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">admin_username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">admin_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="w">  </span><span class="c1"># Change this in production!</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c1"># Database pools section</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="k">[pools]</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="c1"># Example database pool</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="k">[pools.exampledb]</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="n">server_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;127.0.0.1&quot;</span><span class="w">  </span><span class="c1"># PostgreSQL server address</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="n">server_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5432</span><span class="w">         </span><span class="c1"># PostgreSQL server port</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="n">pool_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;transaction&quot;</span><span class="w">  </span><span class="c1"># Connection pooling mode</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="c1"># User configuration for this pool</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="k">[pools.exampledb.users.0]</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="n">pool_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">40</span><span class="w">             </span><span class="c1"># Maximum number of connections in the pool</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;doorman&quot;</span><span class="w">       </span><span class="c1"># Username for PostgreSQL server</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;SCRAM-SHA-256$4096:6nD+Ppi9rgaNyP7...MBiTld7xJipwG/X4=&quot;</span><span class="w">  </span><span class="c1"># Hashed password</span>
</span></code></pre></div>
<p>For a complete list of configuration options and their descriptions, see the <a href="../../reference/general/">Settings Reference Guide</a>.</p>
<h3 id="automatic-configuration-generation">Automatic Configuration Generation</h3>
<p>PgDoorman provides a powerful <code>generate</code> command that can automatically create a configuration file by connecting to your PostgreSQL server and detecting databases and users:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># View all available options</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>pg_doorman<span class="w"> </span>generate<span class="w"> </span>--help
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Generate a configuration file with default settings</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>pg_doorman<span class="w"> </span>generate<span class="w"> </span>--output<span class="w"> </span>pg_doorman.toml
</span></code></pre></div>
<p>The <code>generate</code> command supports several options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--host</code></td>
<td>PostgreSQL host to connect to (uses localhost if not specified)</td>
</tr>
<tr>
<td><code>--port</code>, <code>-p</code></td>
<td>PostgreSQL port to connect to (default: 5432)</td>
</tr>
<tr>
<td><code>--user</code>, <code>-u</code></td>
<td>PostgreSQL user to connect as (requires superuser privileges to read pg_shadow)</td>
</tr>
<tr>
<td><code>--password</code></td>
<td>PostgreSQL password to connect with</td>
</tr>
<tr>
<td><code>--database</code>, <code>-d</code></td>
<td>PostgreSQL database to connect to (uses same name as user if not specified)</td>
</tr>
<tr>
<td><code>--ssl</code></td>
<td>PostgreSQL connection to server via SSL/TLS</td>
</tr>
<tr>
<td><code>--pool-size</code></td>
<td>Pool size for the generated configuration (default: 40)</td>
</tr>
<tr>
<td><code>--session-pool-mode</code>, <code>-s</code></td>
<td>Session pool mode for the generated configuration</td>
</tr>
<tr>
<td><code>--output</code>, <code>-o</code></td>
<td>Output file for the generated configuration (uses stdout if not specified)</td>
</tr>
<tr>
<td><code>--server-host</code></td>
<td>Override server_host in config (uses the host parameter if not specified)</td>
</tr>
</tbody>
</table>
<p>The command connects to your PostgreSQL server, automatically detects all databases and users, and creates a complete configuration file with appropriate settings. This is especially useful for quickly setting up PgDoorman in new environments or when you have many databases and users to configure.</p>
<div class="admonition note">
<p class="admonition-title">PostgreSQL Environment Variables</p>
<p>The <code>generate</code> command also respects standard PostgreSQL environment variables like <code>PGHOST</code>, <code>PGPORT</code>, <code>PGUSER</code>, <code>PGPASSWORD</code>, and <code>PGDATABASE</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Authentication Required</p>
<p>If your PostgreSQL server requires authentication in pg_hba.conf, you will need to manually set the <code>server_password</code> parameter in the configuration file after using the <code>generate</code> command.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Superuser Privileges</p>
<p>Reading user information from PostgreSQL requires superuser privileges to access the <code>pg_shadow</code> table.</p>
</div>
<h3 id="running-pgdoorman">Running PgDoorman</h3>
<p>After creating your configuration file, you can run PgDoorman from the command line:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>pg_doorman<span class="w"> </span>pg_doorman.toml
</span></code></pre></div>
<p>If you don't specify a configuration file, PgDoorman will look for <code>pg_doorman.toml</code> in the current directory.</p>
<h3 id="connecting-to-postgresql-via-pgdoorman">Connecting to PostgreSQL via PgDoorman</h3>
<p>Once PgDoorman is running, connect to it instead of connecting directly to your PostgreSQL database:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span>localhost<span class="w"> </span>-p<span class="w"> </span><span class="m">6432</span><span class="w"> </span>-U<span class="w"> </span>doorman<span class="w"> </span>exampledb
</span></code></pre></div>
<p>Your application's connection string should be updated to point to PgDoorman instead of directly to PostgreSQL:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>postgresql://doorman:password@localhost:6432/exampledb
</span></code></pre></div>
<p>PgDoorman will handle the connection pooling transparently, so your application doesn't need to be aware that it's connecting through a pooler.</p>
<h2 id="administration">Administration</h2>
<h3 id="admin-console">Admin Console</h3>
<p>PgDoorman provides a powerful administrative interface that allows you to monitor and manage the connection pooler. You can access this interface by connecting to the special administration database named <strong>pgdoorman</strong>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>psql<span class="w"> </span>-h<span class="w"> </span>localhost<span class="w"> </span>-p<span class="w"> </span><span class="m">6432</span><span class="w"> </span>-U<span class="w"> </span>admin<span class="w"> </span>pgdoorman
</span></code></pre></div>
<p>Once connected, you can view available commands:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">HELP</span><span class="p">;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Console</span><span class="w"> </span><span class="k">usage</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">DETAIL</span><span class="p">:</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="k">SHOW</span><span class="w"> </span><span class="n">HELP</span><span class="o">|</span><span class="n">CONFIG</span><span class="o">|</span><span class="n">DATABASES</span><span class="o">|</span><span class="n">POOLS</span><span class="o">|</span><span class="n">POOLS_EXTENDED</span><span class="o">|</span><span class="n">CLIENTS</span><span class="o">|</span><span class="n">SERVERS</span><span class="o">|</span><span class="n">USERS</span><span class="o">|</span><span class="k">VERSION</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="k">SHOW</span><span class="w"> </span><span class="n">LISTS</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="k">SHOW</span><span class="w"> </span><span class="n">CONNECTIONS</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="k">SHOW</span><span class="w"> </span><span class="n">STATS</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="n">RELOAD</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="n">SHUTDOWN</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="k">SHOW</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Protocol Compatibility</p>
<p>The admin console currently supports only the simple query protocol.
Some database drivers use the extended query protocol for all commands, making them unsuitable for admin console access. In such cases, use the <code>psql</code> command-line client for administration.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Security</p>
<p>Only the user specified by <code>admin_username</code> in the configuration file is allowed to log in to the admin console. 
Make sure to use a strong password for this account in production environments.</p>
</div>
<h3 id="monitoring-pgdoorman">Monitoring PgDoorman</h3>
<p>The admin console provides several commands to monitor the current state of PgDoorman:</p>
<ul>
<li><code>SHOW STATS</code> - View performance statistics</li>
<li><code>SHOW CLIENTS</code> - List current client connections</li>
<li><code>SHOW SERVERS</code> - List current server connections</li>
<li><code>SHOW POOLS</code> - View connection pool status</li>
<li><code>SHOW DATABASES</code> - List configured databases</li>
<li><code>SHOW USERS</code> - List configured users</li>
</ul>
<p>These commands are described in detail in the <a href="#admin-console-commands">Admin Console Commands</a> section below.</p>
<h3 id="reloading-configuration">Reloading Configuration</h3>
<p>If you make changes to the <code>pg_doorman.toml</code> file, you can apply them without restarting the service:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">pgdoorman</span><span class="o">=#</span><span class="w"> </span><span class="n">RELOAD</span><span class="p">;</span>
</span></code></pre></div>
<p>When you reload the configuration:</p>
<ol>
<li>PgDoorman reads the updated configuration file</li>
<li>Changes to database connection parameters are detected</li>
<li>Existing server connections are closed when they're next released (according to the pooling mode)</li>
<li>New server connections immediately use the updated parameters</li>
</ol>
<p>This allows you to make configuration changes with minimal disruption to your applications.</p>
<h2 id="admin-console-commands">Admin Console Commands</h2>
<p>The admin console provides a set of commands to monitor and manage PgDoorman. These commands follow a SQL-like syntax and can be executed from any PostgreSQL client connected to the admin console.</p>
<h3 id="show-commands">Show Commands</h3>
<p>The <code>SHOW</code> commands display information about PgDoorman's operation. Each command provides different insights into the pooler's performance and current state.</p>
<h4 id="show-stats">SHOW STATS</h4>
<p>The <code>SHOW STATS</code> command displays comprehensive statistics about PgDoorman's operation:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">STATS</span><span class="p">;</span>
</span></code></pre></div>
<p>Statistics are presented per database with the following metrics:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>database</code></td>
<td>The database name these statistics apply to</td>
</tr>
<tr>
<td><code>total_xact_count</code></td>
<td>Total number of SQL transactions processed since startup</td>
</tr>
<tr>
<td><code>total_query_count</code></td>
<td>Total number of SQL commands processed since startup</td>
</tr>
<tr>
<td><code>total_received</code></td>
<td>Total bytes of network traffic received from clients</td>
</tr>
<tr>
<td><code>total_sent</code></td>
<td>Total bytes of network traffic sent to clients</td>
</tr>
<tr>
<td><code>total_xact_time</code></td>
<td>Total microseconds spent in transactions (including idle in transaction)</td>
</tr>
<tr>
<td><code>total_query_time</code></td>
<td>Total microseconds spent actively executing queries</td>
</tr>
<tr>
<td><code>total_wait_time</code></td>
<td>Total microseconds clients spent waiting for a server connection</td>
</tr>
<tr>
<td><code>avg_xact_count</code></td>
<td>Average transactions per second in the last 15-second period</td>
</tr>
<tr>
<td><code>avg_query_count</code></td>
<td>Average queries per second in the last 15-second period</td>
</tr>
<tr>
<td><code>avg_server_assignment_count</code></td>
<td>Average server assignments per second in the last 15-second period</td>
</tr>
<tr>
<td><code>avg_recv</code></td>
<td>Average bytes received per second from clients</td>
</tr>
<tr>
<td><code>avg_sent</code></td>
<td>Average bytes sent per second to clients</td>
</tr>
<tr>
<td><code>avg_xact_time</code></td>
<td>Average transaction duration in microseconds</td>
</tr>
<tr>
<td><code>avg_query_time</code></td>
<td>Average query duration in microseconds</td>
</tr>
<tr>
<td><code>avg_wait_time</code></td>
<td>Average time clients spent waiting for a server in microseconds</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Performance Monitoring</p>
<p>Pay special attention to the <code>avg_wait_time</code> metric. If this value is consistently high, it may indicate that your pool size is too small for your workload.</p>
</div>
<h4 id="show-servers">SHOW SERVERS</h4>
<p>The <code>SHOW SERVERS</code> command displays detailed information about all server connections:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">SERVERS</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>server_id</code></td>
<td>Unique identifier for the server connection</td>
</tr>
<tr>
<td><code>server_process_id</code></td>
<td>PID of the backend PostgreSQL server process (if available)</td>
</tr>
<tr>
<td><code>database_name</code></td>
<td>Name of the database this connection is using</td>
</tr>
<tr>
<td><code>user</code></td>
<td>Username PgDoorman uses to connect to the PostgreSQL server</td>
</tr>
<tr>
<td><code>application_name</code></td>
<td>Value of the <code>application_name</code> parameter set on the server connection</td>
</tr>
<tr>
<td><code>state</code></td>
<td>Current state of the connection: <strong>active</strong>, <strong>idle</strong>, or <strong>used</strong></td>
</tr>
<tr>
<td><code>wait</code></td>
<td>Wait state of the connection: <strong>idle</strong>, <strong>read</strong>, or <strong>write</strong></td>
</tr>
<tr>
<td><code>transaction_count</code></td>
<td>Total number of transactions processed by this connection</td>
</tr>
<tr>
<td><code>query_count</code></td>
<td>Total number of queries processed by this connection</td>
</tr>
<tr>
<td><code>bytes_sent</code></td>
<td>Total bytes sent to the PostgreSQL server</td>
</tr>
<tr>
<td><code>bytes_received</code></td>
<td>Total bytes received from the PostgreSQL server</td>
</tr>
<tr>
<td><code>age_seconds</code></td>
<td>Lifetime of the current server connection in seconds</td>
</tr>
<tr>
<td><code>prepare_cache_hit</code></td>
<td>Number of prepared statement cache hits</td>
</tr>
<tr>
<td><code>prepare_cache_miss</code></td>
<td>Number of prepared statement cache misses</td>
</tr>
<tr>
<td><code>prepare_cache_size</code></td>
<td>Number of unique prepared statements in the cache</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Connection States</p>
<ul>
<li><strong>active</strong>: The connection is currently executing a query</li>
<li><strong>idle</strong>: The connection is available for use</li>
<li><strong>used</strong>: The connection is allocated to a client but not currently executing a query</li>
</ul>
</div>
<h4 id="show-clients">SHOW CLIENTS</h4>
<p>The <code>SHOW CLIENTS</code> command displays information about all client connections to PgDoorman:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">CLIENTS</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>client_id</code></td>
<td>Unique identifier for the client connection</td>
</tr>
<tr>
<td><code>database</code></td>
<td>Name of the database (pool) the client is connected to</td>
</tr>
<tr>
<td><code>user</code></td>
<td>Username the client used to connect</td>
</tr>
<tr>
<td><code>addr</code></td>
<td>Client's IP address and port (IP:port)</td>
</tr>
<tr>
<td><code>tls</code></td>
<td>Whether the connection uses TLS encryption (<strong>true</strong> or <strong>false</strong>)</td>
</tr>
<tr>
<td><code>state</code></td>
<td>Current state of the client connection: <strong>active</strong>, <strong>idle</strong>, or <strong>waiting</strong></td>
</tr>
<tr>
<td><code>wait</code></td>
<td>Wait state of the client connection: <strong>idle</strong>, <strong>read</strong>, or <strong>write</strong></td>
</tr>
<tr>
<td><code>transaction_count</code></td>
<td>Total number of transactions processed for this client</td>
</tr>
<tr>
<td><code>query_count</code></td>
<td>Total number of queries processed for this client</td>
</tr>
<tr>
<td><code>age_seconds</code></td>
<td>Lifetime of the client connection in seconds</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Monitoring Long-Running Connections</p>
<p>The <code>age_seconds</code> column can help identify long-running connections that might be holding resources unnecessarily. Consider implementing connection timeouts in your application for idle connections.</p>
</div>
<h4 id="show-pools">SHOW POOLS</h4>
<p>The <code>SHOW POOLS</code> command displays information about connection pools. A new pool entry is created for each (database, user) pair:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">POOLS</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>database</code></td>
<td>Name of the database</td>
</tr>
<tr>
<td><code>user</code></td>
<td>Username associated with this pool</td>
</tr>
<tr>
<td><code>pool_mode</code></td>
<td>Pooling mode in use: <strong>session</strong> or <strong>transaction</strong></td>
</tr>
<tr>
<td><code>cl_active</code></td>
<td>Number of active client connections (linked to servers or idle)</td>
</tr>
<tr>
<td><code>cl_waiting</code></td>
<td>Number of client connections waiting for a server connection</td>
</tr>
<tr>
<td><code>sv_active</code></td>
<td>Number of server connections linked to clients</td>
</tr>
<tr>
<td><code>sv_idle</code></td>
<td>Number of idle server connections available for immediate use</td>
</tr>
<tr>
<td><code>sv_login</code></td>
<td>Number of server connections currently in the login process</td>
</tr>
<tr>
<td><code>maxwait</code></td>
<td>Maximum wait time in seconds for the oldest client in the queue</td>
</tr>
<tr>
<td><code>maxwait_us</code></td>
<td>Microsecond part of the maximum waiting time</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Performance Alert</p>
<p>If the <code>maxwait</code> value starts increasing, your server pool may not be handling requests quickly enough. This could be due to an overloaded PostgreSQL server or insufficient <code>pool_size</code> setting.</p>
</div>
<h4 id="show-users">SHOW USERS</h4>
<p>The <code>SHOW USERS</code> command displays information about all configured users:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">USERS</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Username as configured in PgDoorman</td>
</tr>
<tr>
<td><code>pool_mode</code></td>
<td>Pooling mode assigned to this user: <strong>session</strong> or <strong>transaction</strong></td>
</tr>
</tbody>
</table>
<h4 id="show-databases">SHOW DATABASES</h4>
<p>The <code>SHOW DATABASES</code> command displays information about all configured database pools:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">DATABASES</span><span class="p">;</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>database</code></td>
<td>Name of the configured database pool</td>
</tr>
<tr>
<td><code>host</code></td>
<td>Hostname of the PostgreSQL server PgDoorman connects to</td>
</tr>
<tr>
<td><code>port</code></td>
<td>Port number of the PostgreSQL server</td>
</tr>
<tr>
<td><code>pool_size</code></td>
<td>Maximum number of server connections for this database</td>
</tr>
<tr>
<td><code>min_pool_size</code></td>
<td>Minimum number of server connections to maintain</td>
</tr>
<tr>
<td><code>reserve_pool_size</code></td>
<td>Maximum number of additional connections allowed</td>
</tr>
<tr>
<td><code>pool_mode</code></td>
<td>Default pooling mode for this database</td>
</tr>
<tr>
<td><code>max_connections</code></td>
<td>Maximum allowed server connections (from <code>max_db_connections</code>)</td>
</tr>
<tr>
<td><code>current_connections</code></td>
<td>Current number of server connections for this database</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Connection Management</p>
<p>Monitor the ratio between <code>current_connections</code> and <code>pool_size</code> to ensure your pool is properly sized. If <code>current_connections</code> frequently reaches <code>pool_size</code>, consider increasing the pool size.</p>
</div>
<h4 id="show-sockets">SHOW SOCKETS</h4>
<p>The <code>SHOW SOCKETS</code> command displays low-level information about network sockets:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">SOCKETS</span><span class="p">;</span>
</span></code></pre></div>
<p>This command includes all information shown in <code>SHOW CLIENTS</code> and <code>SHOW SERVERS</code> plus additional low-level details about the socket connections.</p>
<h4 id="show-version">SHOW VERSION</h4>
<p>The <code>SHOW VERSION</code> command displays the PgDoorman version information:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="k">VERSION</span><span class="p">;</span>
</span></code></pre></div>
<p>This is useful for verifying which version you're running, especially after upgrades.</p>
<h3 id="control-commands">Control Commands</h3>
<p>PgDoorman provides control commands that allow you to manage the service operation directly from the admin console.</p>
<h4 id="shutdown">SHUTDOWN</h4>
<p>The <code>SHUTDOWN</code> command gracefully terminates the PgDoorman process:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="n">SHUTDOWN</span><span class="p">;</span>
</span></code></pre></div>
<p>When executed:</p>
<ol>
<li>PgDoorman stops accepting new client connections</li>
<li>Existing transactions are allowed to complete (within the configured timeout)</li>
<li>All connections are closed</li>
<li>The process exits</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Service Interruption</p>
<p>Using the <code>SHUTDOWN</code> command will terminate the PgDoorman service, disconnecting all clients. Use this command with caution in production environments.</p>
</div>
<h4 id="reload">RELOAD</h4>
<p>The <code>RELOAD</code> command refreshes PgDoorman's configuration without restarting the service:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">pgdoorman</span><span class="o">=&gt;</span><span class="w"> </span><span class="n">RELOAD</span><span class="p">;</span>
</span></code></pre></div>
<p>This command:</p>
<ol>
<li>Rereads the configuration file</li>
<li>Updates all changeable settings</li>
<li>Applies changes to connection parameters for new connections</li>
<li>Maintains existing connections until they're released back to the pool</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Zero-Downtime Configuration Changes</p>
<p>The <code>RELOAD</code> command allows you to modify most configuration parameters without disrupting existing connections. This is ideal for production environments where downtime must be minimized.</p>
</div>
<h2 id="signal-handling">Signal Handling</h2>
<p>PgDoorman responds to standard Unix signals for control and management. These signals can be sent using the <code>kill</code> command (e.g., <code>kill -HUP &lt;pid&gt;</code>).</p>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Description</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SIGHUP</strong></td>
<td>Configuration reload</td>
<td>Equivalent to the <code>RELOAD</code> command in the admin console. Rereads the configuration file and applies changes to settings.</td>
</tr>
<tr>
<td><strong>SIGTERM</strong></td>
<td>Immediate shutdown</td>
<td>Forces PgDoorman to exit immediately. Active connections may be terminated abruptly.</td>
</tr>
<tr>
<td><strong>SIGINT</strong></td>
<td>Graceful shutdown</td>
<td>Initiates a binary upgrade process. The current process starts a new instance and gracefully transfers connections. See <a href="../binary-upgrade/">Binary Upgrade Process</a> for details.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Process Management</p>
<p>In systemd-based environments, you can use <code>systemctl reload pg_doorman</code> to send SIGHUP and <code>systemctl restart pg_doorman</code> for a complete restart.</p>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation Guide">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Installation Guide
              </div>
            </div>
          </a>
        
        
          
          <a href="../binary-upgrade/" class="md-footer__link md-footer__link--next" aria-label="Next: Binary Upgrade Process">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Binary Upgrade Process
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://ozontech.github.io/pg_doorman/" target="_blank" rel="noopener" title="ozontech.github.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/pg_doorman" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "content.code.copy", "content.code.annotate", "navigation.instant", "navigation.tracking", "navigation.sections", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>